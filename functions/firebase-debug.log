[debug] [2025-12-01T12:46:32.541Z] ----------------------------------------------------------------------
[debug] [2025-12-01T12:46:32.545Z] Command:       C:\nvm4w\nodejs\node.exe C:\nvm4w\nodejs\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-12-01T12:46:32.546Z] CLI Version:   14.26.0
[debug] [2025-12-01T12:46:32.546Z] Platform:      win32
[debug] [2025-12-01T12:46:32.546Z] Node Version:  v24.10.0
[debug] [2025-12-01T12:46:32.546Z] Time:          Mon Dec 01 2025 09:46:32 GMT-0300 (HorÃ¡rio PadrÃ£o de BrasÃ­lia)
[debug] [2025-12-01T12:46:32.546Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-12-01T12:46:32.812Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-12-01T12:46:32.812Z] > authorizing via signed-in user (matias.jms14@gmail.com)
[debug] [2025-12-01T12:46:32.812Z] [iam] checking project e-commerce-42ff1 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-12-01T12:46:32.814Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:46:32.814Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:46:32.815Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions [none]
[debug] [2025-12-01T12:46:32.815Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions x-goog-quota-user=projects/e-commerce-42ff1
[debug] [2025-12-01T12:46:32.816Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-12-01T12:46:33.720Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions 200
[debug] [2025-12-01T12:46:33.720Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-12-01T12:46:33.720Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:46:33.720Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:46:33.720Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/e-commerce-42ff1/serviceAccounts/e-commerce-42ff1@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-12-01T12:46:33.720Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/e-commerce-42ff1/serviceAccounts/e-commerce-42ff1@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-12-01T12:46:34.598Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/e-commerce-42ff1/serviceAccounts/e-commerce-42ff1@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-12-01T12:46:34.598Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/e-commerce-42ff1/serviceAccounts/e-commerce-42ff1@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'e-commerce-42ff1'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] +  functions: Finished running predeploy script. 
[debug] [2025-12-01T12:46:43.247Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:46:43.248Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:46:43.248Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1 [none]
[debug] [2025-12-01T12:46:44.140Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1 200
[debug] [2025-12-01T12:46:44.141Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1 {"projectNumber":"676905921719","projectId":"e-commerce-42ff1","lifecycleState":"ACTIVE","name":"e-commerce","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-09-26T10:59:48.735716Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-12-01T12:46:44.145Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:46:44.145Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:46:44.145Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/e-commerce-42ff1/adminSdkConfig [none]
[debug] [2025-12-01T12:46:44.709Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/e-commerce-42ff1/adminSdkConfig 200
[debug] [2025-12-01T12:46:44.709Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/e-commerce-42ff1/adminSdkConfig {"projectId":"e-commerce-42ff1","storageBucket":"e-commerce-42ff1.firebasestorage.app"}
[debug] [2025-12-01T12:46:44.711Z] Validating nodejs source
[debug] [2025-12-01T12:46:46.148Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "main": "./dist/index.js",
  "type": "module",
  "scripts": {
    "lint": "npx eslint .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "start": "firebase emulators:start --only functions",
    "deploy": "npm run lint && npm run build && firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "24"
  },
  "dependencies": {
    "@tsconfig/node20": "^20.1.6",
    "celebrate": "^15.0.3",
    "dayjs": "^1.11.19",
    "dotenv": "^17.2.2",
    "express": "^5.1.0",
    "express-async-handler": "^1.2.0",
    "file-type": "^21.0.0",
    "firebase": "^12.4.0",
    "firebase-admin": "^13.6.0",
    "firebase-functions": "^7.0.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/express": "^5.0.3",
    "@types/node": "^24.5.2",
    "eslint": "^9.39.1",
    "firebase-functions-test": "^3.4.1",
    "typescript": "^5.9.3",
    "typescript-eslint": "^8.48.0"
  },
  "private": true
}
[debug] [2025-12-01T12:46:46.148Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-12-01T12:46:46.150Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-12-01T12:46:46.173Z] Found firebase-functions binary at 'D:\Development\ecommerce-api\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8437

[info] [dotenv@17.2.3] injecting env (2) from .env -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com

[debug] [2025-12-01T12:46:48.191Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-12-01T12:46:52.246Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:46:52.246Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:46:52.246Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/e-commerce-42ff1/services/firebaseextensions.googleapis.com [none]
[debug] [2025-12-01T12:46:52.246Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/e-commerce-42ff1/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/e-commerce-42ff1
[debug] [2025-12-01T12:46:53.272Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/e-commerce-42ff1/services/firebaseextensions.googleapis.com 200
[debug] [2025-12-01T12:46:53.272Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/e-commerce-42ff1/services/firebaseextensions.googleapis.com [omitted]
[warn] !  extensions: missing required API firebaseextensions.googleapis.com. Enabling now... 
[debug] [2025-12-01T12:46:53.273Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:46:53.273Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:46:53.274Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1/projects/e-commerce-42ff1/services/firebaseextensions.googleapis.com:enable [none]
[debug] [2025-12-01T12:46:53.274Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1/projects/e-commerce-42ff1/services/firebaseextensions.googleapis.com:enable x-goog-quota-user=projects/e-commerce-42ff1
[debug] [2025-12-01T12:46:53.850Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1/projects/e-commerce-42ff1/services/firebaseextensions.googleapis.com:enable 200
[debug] [2025-12-01T12:46:53.850Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1/projects/e-commerce-42ff1/services/firebaseextensions.googleapis.com:enable [omitted]
[debug] [2025-12-01T12:47:03.865Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-12-01T12:47:03.865Z] > authorizing via signed-in user (matias.jms14@gmail.com)
[debug] [2025-12-01T12:47:03.866Z] [iam] checking project e-commerce-42ff1 for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-12-01T12:47:03.866Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:03.866Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:03.866Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions [none]
[debug] [2025-12-01T12:47:03.866Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions x-goog-quota-user=projects/e-commerce-42ff1
[debug] [2025-12-01T12:47:03.866Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-12-01T12:47:04.711Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions 200
[debug] [2025-12-01T12:47:04.711Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-12-01T12:47:04.712Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:04.712Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:04.712Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/e-commerce-42ff1/instances pageSize=100&pageToken=
[debug] [2025-12-01T12:47:06.949Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/e-commerce-42ff1/instances 200
[debug] [2025-12-01T12:47:06.950Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/e-commerce-42ff1/instances {}
[info] i  functions: Loaded environment variables from .env. 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged D:\Development\ecommerce-api\functions (179.07 KB) for uploading 
[debug] [2025-12-01T12:47:07.321Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:07.321Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:07.321Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/-/functions [none]
[debug] [2025-12-01T12:47:08.431Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/-/functions 200
[debug] [2025-12-01T12:47:08.431Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/-/functions {}
[debug] [2025-12-01T12:47:08.432Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:08.432Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:08.432Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/e-commerce-42ff1/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-12-01T12:47:09.628Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/e-commerce-42ff1/locations/-/functions 200
[debug] [2025-12-01T12:47:09.628Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/e-commerce-42ff1/locations/-/functions {}
[debug] [2025-12-01T12:47:09.631Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:09.632Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:09.632Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1 [none]
[debug] [2025-12-01T12:47:09.842Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1 200
[debug] [2025-12-01T12:47:09.843Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1 {"projectNumber":"676905921719","projectId":"e-commerce-42ff1","lifecycleState":"ACTIVE","name":"e-commerce","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-09-26T10:59:48.735716Z"}
[debug] [2025-12-01T12:47:09.844Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:09.844Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:09.844Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/e-commerce-42ff1/billingInfo [none]
[debug] [2025-12-01T12:47:11.060Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/e-commerce-42ff1/billingInfo 200
[debug] [2025-12-01T12:47:11.060Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/e-commerce-42ff1/billingInfo {"name":"projects/e-commerce-42ff1/billingInfo","projectId":"e-commerce-42ff1","billingAccountName":"billingAccounts/01DC17-B9C191-58BBB6","billingEnabled":true}
[debug] [2025-12-01T12:47:11.061Z] [functions] found 1 new HTTP functions, testing setIamPolicy permission...
[debug] [2025-12-01T12:47:11.061Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:11.061Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:11.061Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions [none]
[debug] [2025-12-01T12:47:11.061Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions x-goog-quota-user=projects/e-commerce-42ff1
[debug] [2025-12-01T12:47:11.061Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2025-12-01T12:47:11.234Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions 200
[debug] [2025-12-01T12:47:11.234Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2025-12-01T12:47:11.234Z] [functions] found setIamPolicy permission, proceeding with deploy
[debug] [2025-12-01T12:47:11.235Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:11.235Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:11.235Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-12-01T12:47:11.235Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions:generateUploadUrl {}
[debug] [2025-12-01T12:47:23.579Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-12-01T12:47:23.579Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-1056483906741.us-central1.cloudfunctions.appspot.com/76d13685-1b7f-4540-842d-e128bf04c240.zip?GoogleAccessId=service-676905921719@gcf-admin-robot.iam.gserviceaccount.com&Expires=1764595044&Signature=ptYvDzrR%2Bw7Z4wjNjsLqPSI33DtMkzNWJbUvJdyHhrhjjtuhS%2F8%2BEwS0XZB5jV%2BF6bZRPlogSlR8vkBOGiKUYE3%2FFbtkhkJneHeIvhM1o6DR4SJ1kIcYBMNQdzQ%2BFicEQ6xOV71Ndh3Q2D%2FRpH0SK1tlAg14QYCV6hHILIqShbTggpalc8njuMya5FEHjJkOw1iWll%2BkrjBYXTh4i06cG90WknzCHegHMQVyC9h8L8sV7CyvBkCRurahH%2Bh5VGDHbtIotY9y8cLpcibgzmB8s7VgdCA%2FXgLDiyOorJ6438uBPvdlG08nX6P5A0ructW8jzuypGJbC1RLYlxv9L2dzg%3D%3D"}
[debug] [2025-12-01T12:47:23.582Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-1056483906741.us-central1.cloudfunctions.appspot.com/76d13685-1b7f-4540-842d-e128bf04c240.zip GoogleAccessId=service-676905921719%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1764595044&Signature=ptYvDzrR%2Bw7Z4wjNjsLqPSI33DtMkzNWJbUvJdyHhrhjjtuhS%2F8%2BEwS0XZB5jV%2BF6bZRPlogSlR8vkBOGiKUYE3%2FFbtkhkJneHeIvhM1o6DR4SJ1kIcYBMNQdzQ%2BFicEQ6xOV71Ndh3Q2D%2FRpH0SK1tlAg14QYCV6hHILIqShbTggpalc8njuMya5FEHjJkOw1iWll%2BkrjBYXTh4i06cG90WknzCHegHMQVyC9h8L8sV7CyvBkCRurahH%2Bh5VGDHbtIotY9y8cLpcibgzmB8s7VgdCA%2FXgLDiyOorJ6438uBPvdlG08nX6P5A0ructW8jzuypGJbC1RLYlxv9L2dzg%3D%3D
[debug] [2025-12-01T12:47:23.582Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-1056483906741.us-central1.cloudfunctions.appspot.com/76d13685-1b7f-4540-842d-e128bf04c240.zip [stream]
[debug] [2025-12-01T12:47:24.485Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-1056483906741.us-central1.cloudfunctions.appspot.com/76d13685-1b7f-4540-842d-e128bf04c240.zip 200
[debug] [2025-12-01T12:47:24.485Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-1056483906741.us-central1.cloudfunctions.appspot.com/76d13685-1b7f-4540-842d-e128bf04c240.zip [omitted]
[info] +  functions: functions source uploaded successfully 
[info] i  functions: creating Node.js 24 (1st Gen) function api(us-central1)... 
[debug] [2025-12-01T12:47:24.490Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:24.490Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:24.490Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions [none]
[debug] [2025-12-01T12:47:24.490Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions {"name":"projects/e-commerce-42ff1/locations/us-central1/functions/api","sourceUploadUrl":"https://storage.googleapis.com/uploads-1056483906741.us-central1.cloudfunctions.appspot.com/76d13685-1b7f-4540-842d-e128bf04c240.zip?GoogleAccessId=service-676905921719@gcf-admin-robot.iam.gserviceaccount.com&Expires=1764595044&Signature=ptYvDzrR%2Bw7Z4wjNjsLqPSI33DtMkzNWJbUvJdyHhrhjjtuhS%2F8%2BEwS0XZB5jV%2BF6bZRPlogSlR8vkBOGiKUYE3%2FFbtkhkJneHeIvhM1o6DR4SJ1kIcYBMNQdzQ%2BFicEQ6xOV71Ndh3Q2D%2FRpH0SK1tlAg14QYCV6hHILIqShbTggpalc8njuMya5FEHjJkOw1iWll%2BkrjBYXTh4i06cG90WknzCHegHMQVyC9h8L8sV7CyvBkCRurahH%2Bh5VGDHbtIotY9y8cLpcibgzmB8s7VgdCA%2FXgLDiyOorJ6438uBPvdlG08nX6P5A0ructW8jzuypGJbC1RLYlxv9L2dzg%3D%3D","entryPoint":"api","runtime":"nodejs24","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"979c807c7e40313a65c27cdd9bd081d73b51a380"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"GOOGE_APPICATION_CREDENTIALS":"./firebase-adminsdk.json","API_KEY":"AIzaSyD1dNRKBCUdqbey5Sn6ECdQFHBPweqINEQ","FIREBASE_CONFIG":"{\"projectId\":\"e-commerce-42ff1\",\"storageBucket\":\"e-commerce-42ff1.firebasestorage.app\"}","GCLOUD_PROJECT":"e-commerce-42ff1","EVENTARC_CLOUD_EVENT_SOURCE":"projects/e-commerce-42ff1/locations/us-central1/functions/api"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2025-12-01T12:47:25.559Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions 400
[debug] [2025-12-01T12:47:25.559Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions {"error":{"code":400,"message":"Failed to create 1st Gen function projects/e-commerce-42ff1/locations/us-central1/functions/api: runtime: Runtime validation errors: [error_code: \t INVALID_RUNTIME\nmessage: \"Runtime \\\"nodejs24\\\" is not supported on GCF Gen1\"\n]","status":"INVALID_ARGUMENT"}}
[warn] !  functions: Runtime "nodejs24" is not supported on GCF Gen1 for function projects/e-commerce-42ff1/locations/us-central1/functions/api 
[warn] !  functions: failed to create function projects/e-commerce-42ff1/locations/us-central1/functions/api 
[error] Failed to create function projects/e-commerce-42ff1/locations/us-central1/functions/api
[debug] [2025-12-01T12:47:25.567Z] Total Function Deployment time: 1073
[debug] [2025-12-01T12:47:25.567Z] 1 Functions Deployed
[debug] [2025-12-01T12:47:25.567Z] 1 Functions Errored
[debug] [2025-12-01T12:47:25.567Z] 0 Function Deployments Aborted
[debug] [2025-12-01T12:47:25.567Z] Average Function Deployment time: 1072
[info] 
[info] Functions deploy had errors with the following functions:
	api(us-central1)
[debug] [2025-12-01T12:47:25.730Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[debug] [2025-12-01T12:47:25.730Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:25.731Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:47:25.731Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-12-01T12:47:26.842Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/repositories/gcf-artifacts 404
[debug] [2025-12-01T12:47:26.843Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/repositories/gcf-artifacts {"error":{"code":404,"message":"Requested entity was not found.","status":"NOT_FOUND"}}
[debug] [2025-12-01T12:47:26.843Z] Failed to check artifact cleanup policy for region us-central1: Request to https://artifactregistry.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/repositories/gcf-artifacts had HTTP Error: 404, Requested entity was not found. {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":404,"message":"Requested entity was not found.","status":"NOT_FOUND"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://artifactregistry.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/repositories/gcf-artifacts had HTTP Error: 404, Requested entity was not found.","status":404}
[debug] [2025-12-01T12:47:26.843Z] Functions deploy failed.
[debug] [2025-12-01T12:47:26.843Z] {
  "endpoint": {
    "id": "api",
    "project": "e-commerce-42ff1",
    "region": "us-central1",
    "entryPoint": "api",
    "platform": "gcfv1",
    "runtime": "nodejs24",
    "httpsTrigger": {},
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "GOOGE_APPICATION_CREDENTIALS": "./firebase-adminsdk.json",
      "API_KEY": "AIzaSyD1dNRKBCUdqbey5Sn6ECdQFHBPweqINEQ",
      "FIREBASE_CONFIG": "{\"projectId\":\"e-commerce-42ff1\",\"storageBucket\":\"e-commerce-42ff1.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "e-commerce-42ff1",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/e-commerce-42ff1/locations/us-central1/functions/api"
    },
    "codebase": "default",
    "targetedByOnly": false,
    "hash": "979c807c7e40313a65c27cdd9bd081d73b51a380",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/e-commerce-42ff1/locations/us-central1/functions/api"
    },
    "exit": 1,
    "message": "Failed to create function projects/e-commerce-42ff1/locations/us-central1/functions/api",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 400,
            "message": "Failed to create 1st Gen function projects/e-commerce-42ff1/locations/us-central1/functions/api: runtime: Runtime validation errors: [error_code: \t INVALID_RUNTIME\nmessage: \"Runtime \\\"nodejs24\\\" is not supported on GCF Gen1\"\n]",
            "status": "INVALID_ARGUMENT"
          }
        },
        "response": {
          "statusCode": 400
        }
      },
      "exit": 1,
      "message": "Request to https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions had HTTP Error: 400, Failed to create 1st Gen function projects/e-commerce-42ff1/locations/us-central1/functions/api: runtime: Runtime validation errors: [error_code: \t INVALID_RUNTIME\nmessage: \"Runtime \\\"nodejs24\\\" is not supported on GCF Gen1\"\n]",
      "status": 400
    },
    "status": 400,
    "code": 400
  }
}
[debug] [2025-12-01T12:47:26.918Z] Error: Failed to create function api in region us-central1
    at C:\Users\dedej\AppData\Local\nvm\v24.10.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:52:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Fabricator.createV1Function (C:\Users\dedej\AppData\Local\nvm\v24.10.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:194:32)
    at async Fabricator.createEndpoint (C:\Users\dedej\AppData\Local\nvm\v24.10.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:134:13)
    at async handle (C:\Users\dedej\AppData\Local\nvm\v24.10.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2025-12-01T12:49:48.347Z] ----------------------------------------------------------------------
[debug] [2025-12-01T12:49:48.351Z] Command:       C:\nvm4w\nodejs\node.exe C:\nvm4w\nodejs\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-12-01T12:49:48.351Z] CLI Version:   14.26.0
[debug] [2025-12-01T12:49:48.352Z] Platform:      win32
[debug] [2025-12-01T12:49:48.352Z] Node Version:  v24.10.0
[debug] [2025-12-01T12:49:48.352Z] Time:          Mon Dec 01 2025 09:49:48 GMT-0300 (HorÃ¡rio PadrÃ£o de BrasÃ­lia)
[debug] [2025-12-01T12:49:48.352Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-12-01T12:49:48.630Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-12-01T12:49:48.630Z] > authorizing via signed-in user (matias.jms14@gmail.com)
[debug] [2025-12-01T12:49:48.630Z] [iam] checking project e-commerce-42ff1 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-12-01T12:49:48.632Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:49:48.632Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:49:48.633Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions [none]
[debug] [2025-12-01T12:49:48.633Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions x-goog-quota-user=projects/e-commerce-42ff1
[debug] [2025-12-01T12:49:48.633Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-12-01T12:49:49.567Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions 200
[debug] [2025-12-01T12:49:49.567Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-12-01T12:49:49.567Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:49:49.568Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:49:49.568Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/e-commerce-42ff1/serviceAccounts/e-commerce-42ff1@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-12-01T12:49:49.568Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/e-commerce-42ff1/serviceAccounts/e-commerce-42ff1@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-12-01T12:49:50.422Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/e-commerce-42ff1/serviceAccounts/e-commerce-42ff1@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-12-01T12:49:50.422Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/e-commerce-42ff1/serviceAccounts/e-commerce-42ff1@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'e-commerce-42ff1'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] +  functions: Finished running predeploy script. 
[debug] [2025-12-01T12:49:59.199Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:49:59.199Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:49:59.199Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1 [none]
[debug] [2025-12-01T12:50:00.092Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1 200
[debug] [2025-12-01T12:50:00.092Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1 {"projectNumber":"676905921719","projectId":"e-commerce-42ff1","lifecycleState":"ACTIVE","name":"e-commerce","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-09-26T10:59:48.735716Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-12-01T12:50:00.095Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:00.095Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:00.095Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/e-commerce-42ff1/adminSdkConfig [none]
[debug] [2025-12-01T12:50:00.668Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/e-commerce-42ff1/adminSdkConfig 200
[debug] [2025-12-01T12:50:00.668Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/e-commerce-42ff1/adminSdkConfig {"projectId":"e-commerce-42ff1","storageBucket":"e-commerce-42ff1.firebasestorage.app"}
[debug] [2025-12-01T12:50:00.670Z] Validating nodejs source
[debug] [2025-12-01T12:50:02.123Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "main": "./dist/index.js",
  "type": "module",
  "scripts": {
    "lint": "npx eslint .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "start": "firebase emulators:start --only functions",
    "deploy": "npm run lint && npm run build && firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "dependencies": {
    "@tsconfig/node20": "^20.1.6",
    "celebrate": "^15.0.3",
    "dayjs": "^1.11.19",
    "dotenv": "^17.2.2",
    "express": "^5.1.0",
    "express-async-handler": "^1.2.0",
    "file-type": "^21.0.0",
    "firebase": "^12.4.0",
    "firebase-admin": "^13.6.0",
    "firebase-functions": "^7.0.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/express": "^5.0.3",
    "@types/node": "^24.5.2",
    "eslint": "^9.39.1",
    "firebase-functions-test": "^3.4.1",
    "typescript": "^5.9.3",
    "typescript-eslint": "^8.48.0"
  },
  "private": true
}
[debug] [2025-12-01T12:50:02.124Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-12-01T12:50:02.125Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-12-01T12:50:02.148Z] Found firebase-functions binary at 'D:\Development\ecommerce-api\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8834

[info] [dotenv@17.2.3] injecting env (2) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }

[debug] [2025-12-01T12:50:04.221Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-12-01T12:50:08.271Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-12-01T12:50:08.271Z] > authorizing via signed-in user (matias.jms14@gmail.com)
[debug] [2025-12-01T12:50:08.271Z] [iam] checking project e-commerce-42ff1 for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-12-01T12:50:08.271Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:08.271Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:08.271Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions [none]
[debug] [2025-12-01T12:50:08.271Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions x-goog-quota-user=projects/e-commerce-42ff1
[debug] [2025-12-01T12:50:08.272Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-12-01T12:50:09.115Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions 200
[debug] [2025-12-01T12:50:09.115Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-12-01T12:50:09.115Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:09.116Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:09.116Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/e-commerce-42ff1/instances pageSize=100&pageToken=
[debug] [2025-12-01T12:50:10.193Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/e-commerce-42ff1/instances 200
[debug] [2025-12-01T12:50:10.194Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/e-commerce-42ff1/instances {}
[info] i  functions: Loaded environment variables from .env. 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged D:\Development\ecommerce-api\functions (179.07 KB) for uploading 
[debug] [2025-12-01T12:50:10.551Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:10.551Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:10.551Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/-/functions [none]
[debug] [2025-12-01T12:50:11.603Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/-/functions 200
[debug] [2025-12-01T12:50:11.603Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/-/functions {}
[debug] [2025-12-01T12:50:11.603Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:11.603Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:11.603Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/e-commerce-42ff1/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-12-01T12:50:12.811Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/e-commerce-42ff1/locations/-/functions 200
[debug] [2025-12-01T12:50:12.811Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/e-commerce-42ff1/locations/-/functions {}
[debug] [2025-12-01T12:50:12.815Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:12.815Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:12.815Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1 [none]
[debug] [2025-12-01T12:50:13.015Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1 200
[debug] [2025-12-01T12:50:13.016Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1 {"projectNumber":"676905921719","projectId":"e-commerce-42ff1","lifecycleState":"ACTIVE","name":"e-commerce","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-09-26T10:59:48.735716Z"}
[debug] [2025-12-01T12:50:13.017Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:13.017Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:13.017Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/e-commerce-42ff1/billingInfo [none]
[debug] [2025-12-01T12:50:14.020Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/e-commerce-42ff1/billingInfo 200
[debug] [2025-12-01T12:50:14.020Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/e-commerce-42ff1/billingInfo {"name":"projects/e-commerce-42ff1/billingInfo","projectId":"e-commerce-42ff1","billingAccountName":"billingAccounts/01DC17-B9C191-58BBB6","billingEnabled":true}
[debug] [2025-12-01T12:50:14.021Z] [functions] found 1 new HTTP functions, testing setIamPolicy permission...
[debug] [2025-12-01T12:50:14.021Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:14.022Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:14.022Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions [none]
[debug] [2025-12-01T12:50:14.022Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions x-goog-quota-user=projects/e-commerce-42ff1
[debug] [2025-12-01T12:50:14.022Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2025-12-01T12:50:14.191Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions 200
[debug] [2025-12-01T12:50:14.192Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/e-commerce-42ff1:testIamPermissions {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2025-12-01T12:50:14.192Z] [functions] found setIamPolicy permission, proceeding with deploy
[debug] [2025-12-01T12:50:14.192Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:14.192Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:14.193Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-12-01T12:50:14.193Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions:generateUploadUrl {}
[debug] [2025-12-01T12:50:15.191Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-12-01T12:50:15.191Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-1056483906741.us-central1.cloudfunctions.appspot.com/2c0f0b4b-29ce-4126-8351-ef5b458f0835.zip?GoogleAccessId=service-676905921719@gcf-admin-robot.iam.gserviceaccount.com&Expires=1764595215&Signature=AdEa0wlXNUZ2LUGiXlJS5%2FLczY5lmKR2d8%2Fmqn9X2W1MTHgBz5lQthojpIscl8HJeiYctxnFY%2FH9wnnA4yC3wjhDMsoC9LZK7n%2F4Mag1TV4y0CdbACh6WquGcK5tg92ik%2F3VGHL4167JeyZcUeJK%2F4NX1R9hqdendT9GiCdiYPVa9TwoxJww8ZAvC8uxMBC3D5XpfougQWwjG4QxohvrN2MhJ1w68kdCEcrEjeM6A4A0YzLghmJAtuh7Ca4YOCVoe3W7U%2FsOMO17DGQTQ6j%2F3SA2wfVAO2Zgwd21AQwW2EMwskGXJZCKfiDrpsGR%2BUV757M3FA2obFDIBVxJth4Ucg%3D%3D"}
[debug] [2025-12-01T12:50:15.192Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-1056483906741.us-central1.cloudfunctions.appspot.com/2c0f0b4b-29ce-4126-8351-ef5b458f0835.zip GoogleAccessId=service-676905921719%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1764595215&Signature=AdEa0wlXNUZ2LUGiXlJS5%2FLczY5lmKR2d8%2Fmqn9X2W1MTHgBz5lQthojpIscl8HJeiYctxnFY%2FH9wnnA4yC3wjhDMsoC9LZK7n%2F4Mag1TV4y0CdbACh6WquGcK5tg92ik%2F3VGHL4167JeyZcUeJK%2F4NX1R9hqdendT9GiCdiYPVa9TwoxJww8ZAvC8uxMBC3D5XpfougQWwjG4QxohvrN2MhJ1w68kdCEcrEjeM6A4A0YzLghmJAtuh7Ca4YOCVoe3W7U%2FsOMO17DGQTQ6j%2F3SA2wfVAO2Zgwd21AQwW2EMwskGXJZCKfiDrpsGR%2BUV757M3FA2obFDIBVxJth4Ucg%3D%3D
[debug] [2025-12-01T12:50:15.192Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-1056483906741.us-central1.cloudfunctions.appspot.com/2c0f0b4b-29ce-4126-8351-ef5b458f0835.zip [stream]
[debug] [2025-12-01T12:50:16.062Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-1056483906741.us-central1.cloudfunctions.appspot.com/2c0f0b4b-29ce-4126-8351-ef5b458f0835.zip 200
[debug] [2025-12-01T12:50:16.062Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-1056483906741.us-central1.cloudfunctions.appspot.com/2c0f0b4b-29ce-4126-8351-ef5b458f0835.zip [omitted]
[info] +  functions: functions source uploaded successfully 
[info] i  functions: creating Node.js 20 (1st Gen) function api(us-central1)... 
[debug] [2025-12-01T12:50:16.067Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:16.067Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:16.067Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions [none]
[debug] [2025-12-01T12:50:16.067Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions {"name":"projects/e-commerce-42ff1/locations/us-central1/functions/api","sourceUploadUrl":"https://storage.googleapis.com/uploads-1056483906741.us-central1.cloudfunctions.appspot.com/2c0f0b4b-29ce-4126-8351-ef5b458f0835.zip?GoogleAccessId=service-676905921719@gcf-admin-robot.iam.gserviceaccount.com&Expires=1764595215&Signature=AdEa0wlXNUZ2LUGiXlJS5%2FLczY5lmKR2d8%2Fmqn9X2W1MTHgBz5lQthojpIscl8HJeiYctxnFY%2FH9wnnA4yC3wjhDMsoC9LZK7n%2F4Mag1TV4y0CdbACh6WquGcK5tg92ik%2F3VGHL4167JeyZcUeJK%2F4NX1R9hqdendT9GiCdiYPVa9TwoxJww8ZAvC8uxMBC3D5XpfougQWwjG4QxohvrN2MhJ1w68kdCEcrEjeM6A4A0YzLghmJAtuh7Ca4YOCVoe3W7U%2FsOMO17DGQTQ6j%2F3SA2wfVAO2Zgwd21AQwW2EMwskGXJZCKfiDrpsGR%2BUV757M3FA2obFDIBVxJth4Ucg%3D%3D","entryPoint":"api","runtime":"nodejs20","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"dbe935480e7a25a02436f71ea6824b392b9906b8"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"GOOGE_APPICATION_CREDENTIALS":"./firebase-adminsdk.json","API_KEY":"AIzaSyD1dNRKBCUdqbey5Sn6ECdQFHBPweqINEQ","FIREBASE_CONFIG":"{\"projectId\":\"e-commerce-42ff1\",\"storageBucket\":\"e-commerce-42ff1.firebasestorage.app\"}","GCLOUD_PROJECT":"e-commerce-42ff1","EVENTARC_CLOUD_EVENT_SOURCE":"projects/e-commerce-42ff1/locations/us-central1/functions/api"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2025-12-01T12:50:18.143Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions 400
[debug] [2025-12-01T12:50:18.143Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions {"error":{"code":400,"message":"Failed to create 1st Gen function projects/e-commerce-42ff1/locations/us-central1/functions/api: Default service account '676905921719-compute@developer.gserviceaccount.com' doesn't exist. Please recreate this account or specify a different account. Please visit https://cloud.google.com/functions/docs/troubleshooting for in-depth troubleshooting documentation.","status":"FAILED_PRECONDITION"}}
[warn] !  functions: failed to create function projects/e-commerce-42ff1/locations/us-central1/functions/api 
[error] Failed to create function projects/e-commerce-42ff1/locations/us-central1/functions/api
[debug] [2025-12-01T12:50:18.151Z] Total Function Deployment time: 2080
[debug] [2025-12-01T12:50:18.151Z] 1 Functions Deployed
[debug] [2025-12-01T12:50:18.151Z] 1 Functions Errored
[debug] [2025-12-01T12:50:18.151Z] 0 Function Deployments Aborted
[debug] [2025-12-01T12:50:18.151Z] Average Function Deployment time: 2079
[info] 
[info] Functions deploy had errors with the following functions:
	api(us-central1)
[debug] [2025-12-01T12:50:18.622Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[debug] [2025-12-01T12:50:18.623Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:18.623Z] Checked if tokens are valid: true, expires at: 1764596709780
[debug] [2025-12-01T12:50:18.623Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-12-01T12:50:19.662Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/repositories/gcf-artifacts 404
[debug] [2025-12-01T12:50:19.662Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/repositories/gcf-artifacts {"error":{"code":404,"message":"Requested entity was not found.","status":"NOT_FOUND"}}
[debug] [2025-12-01T12:50:19.662Z] Failed to check artifact cleanup policy for region us-central1: Request to https://artifactregistry.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/repositories/gcf-artifacts had HTTP Error: 404, Requested entity was not found. {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":404,"message":"Requested entity was not found.","status":"NOT_FOUND"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://artifactregistry.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/repositories/gcf-artifacts had HTTP Error: 404, Requested entity was not found.","status":404}
[debug] [2025-12-01T12:50:19.663Z] Functions deploy failed.
[debug] [2025-12-01T12:50:19.663Z] {
  "endpoint": {
    "id": "api",
    "project": "e-commerce-42ff1",
    "region": "us-central1",
    "entryPoint": "api",
    "platform": "gcfv1",
    "runtime": "nodejs20",
    "httpsTrigger": {},
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "GOOGE_APPICATION_CREDENTIALS": "./firebase-adminsdk.json",
      "API_KEY": "AIzaSyD1dNRKBCUdqbey5Sn6ECdQFHBPweqINEQ",
      "FIREBASE_CONFIG": "{\"projectId\":\"e-commerce-42ff1\",\"storageBucket\":\"e-commerce-42ff1.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "e-commerce-42ff1",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/e-commerce-42ff1/locations/us-central1/functions/api"
    },
    "codebase": "default",
    "targetedByOnly": false,
    "hash": "dbe935480e7a25a02436f71ea6824b392b9906b8",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/e-commerce-42ff1/locations/us-central1/functions/api"
    },
    "exit": 1,
    "message": "Failed to create function projects/e-commerce-42ff1/locations/us-central1/functions/api",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 400,
            "message": "Failed to create 1st Gen function projects/e-commerce-42ff1/locations/us-central1/functions/api: Default service account '676905921719-compute@developer.gserviceaccount.com' doesn't exist. Please recreate this account or specify a different account. Please visit https://cloud.google.com/functions/docs/troubleshooting for in-depth troubleshooting documentation.",
            "status": "FAILED_PRECONDITION"
          }
        },
        "response": {
          "statusCode": 400
        }
      },
      "exit": 1,
      "message": "Request to https://cloudfunctions.googleapis.com/v1/projects/e-commerce-42ff1/locations/us-central1/functions had HTTP Error: 400, Failed to create 1st Gen function projects/e-commerce-42ff1/locations/us-central1/functions/api: Default service account '676905921719-compute@developer.gserviceaccount.com' doesn't exist. Please recreate this account or specify a different account. Please visit https://cloud.google.com/functions/docs/troubleshooting for in-depth troubleshooting documentation.",
      "status": 400
    },
    "status": 400,
    "code": 400
  }
}
[debug] [2025-12-01T12:50:19.801Z] Error: Failed to create function api in region us-central1
    at C:\Users\dedej\AppData\Local\nvm\v24.10.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:52:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Fabricator.createV1Function (C:\Users\dedej\AppData\Local\nvm\v24.10.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:194:32)
    at async Fabricator.createEndpoint (C:\Users\dedej\AppData\Local\nvm\v24.10.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:134:13)
    at async handle (C:\Users\dedej\AppData\Local\nvm\v24.10.0\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
